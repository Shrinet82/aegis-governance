policies:
  # Mark unattached EBS volumes for deletion in 4 days
  - name: aws-ebs-mark-unattached
    resource: aws.ebs
    comment: "Mark unattached EBS volumes for deletion in 4 days"
    filters:
      - Attachments: []
      - "tag:custodian_status": absent
    actions:
      - type: mark-for-op
        tag: custodian_status
        op: delete
        days: 4

  # Delete EBS volumes previously marked for deletion
  - name: aws-ebs-delete-marked
    resource: aws.ebs
    comment: "Delete EBS volumes marked for deletion"
    filters:
      - type: marked-for-op
        tag: custodian_status
        op: delete
    actions:
      - type: delete

  # Report unassociated Elastic IPs (notify only - no mark-for-op support)
  - name: aws-eip-report-unused
    resource: aws.network-addr
    comment: "Report unassociated Elastic IPs"
    filters:
      - type: value
        key: AssociationId
        value: absent
